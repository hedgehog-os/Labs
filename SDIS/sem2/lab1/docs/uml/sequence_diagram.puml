@startuml Police Management System - Sequence Diagram
skinparam defaultFontName "Segoe UI"
skinparam shadowing false

title Crime Investigation and Arrest Process

participant "User" as U
participant "PoliceSystem" as PS
participant "Investigation" as I
participant "Policeman" as P
participant "Security" as S

== Investigation Phase ==
U -> PS: investigate --arrest
PS -> I: investigate_all()
I --> PS: list of (crime, severity)

== Assignment Phase ==
loop For each guilty finding
    PS -> PS: Find available officer
    PS -> P: assign_crime((crime, severity))
    P -> P: Store criminal assignment
end

== Arrest Phase ==
PS -> PS: _perform_arrests_and_cleanup()
loop For each assigned officer
    PS -> P: arrest()
    alt Arrest Successful
        P --> PS: True
        P -> P: Clear criminal assignment
        P -> P: Increase fatigue
    else Arrest Failed
        P --> PS: False
        P -> P: Increase fatigue
    end
end

== Cleanup Phase ==
PS -> PS: Remove solved crimes from applications
PS -> S: update_all_zones_security()
S --> PS: Updated security levels

== Results ==
PS --> U: Show arrest summary
PS --> U: Show updated security levels

note right of P
  Fatigue increases after
  arrest attempt regardless
  of success
end note

note bottom of PS
  Crimes are removed from
  applications list when
  suspect is arrested
end note

note left of S
  Security = citizens / crimes
  per zone, updated after
  each arrest
end note

@enduml
