@startuml sequence_diagram
' Police Management System - Crime Investigation Sequence Diagram
' UML 2.5

skinparam defaultFontName "Arial"
skinparam fontSize 10
skinparam sequence {
    LifeLineBackgroundColor White
    LifeLineBorderColor Black
    ArrowColor Black
}
skinparam roundcorner 5
skinparam maxmessages 50

title Crime Investigation Process

actor "User" as U
participant "CLI" as C
participant "PoliceSystem" as S
participant "Investigation" as I
participant "Police" as P
participant "Policeman" as O

== Initialization ==

U -> C : investigate --arrest
C -> S : investigate_crimes(true)

== Investigation Phase ==

S -> I : investigate_all()
activate I

loop For each crime
    I -> I : Check guilt\n(severity / 5.0)
    I --> S : (crime, severity)
end

deactivate I

== Assignment Phase ==

S -> P : get_policemen()
activate P
P --> S : list[Policeman]
deactivate P

loop For each result
    S -> O : assign_crime()
    activate O
    O --> S : assigned
    deactivate O
end

== Arrest Phase ==

loop For each officer
    S -> O : arrest()
    activate O
    O -> O : Check success\n(fatigue, severity)
    
    alt Success
        O --> S : true
        note right: Crime removed
    else Failure
        O --> S : false
    end
    
    O -> O : fatigue++
    deactivate O
end

== Recovery Phase ==

loop For each officer
    S -> O : recovery()
    activate O
    O -> O : fatigue = 0
    deactivate O
end

== Security Update ==

S -> S : Update zone security
S --> C : Display results
C --> U : Output

@enduml
