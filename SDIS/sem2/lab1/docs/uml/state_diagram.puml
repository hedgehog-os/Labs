@startuml state_diagram
' Police Management System - Policeman State Diagram
' UML 2.5
' 
' States are determined by:
' - is_work: True (on duty) / False (off duty)
' - has_assignment: True (crime assigned) / False (no assignment)
' - fatigue: 0-2 (fresh), 3-5 (tired), 6+ (exhausted) - visual only

skinparam defaultFontName "Arial"
skinparam fontSize 10
skinparam state {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}
skinparam roundcorner 5

title Policeman State Machine

[*] --> OffDuty : Constructor\nis_work = True

state "Off Duty" as OffDuty {
    note right
        is_work = False
        No active assignments
    end note
}

state "On Duty" as OnDuty {
    note right
        is_work = True
        has_assignment = False
        Available for assignment
    end note
}

state "Assigned" as Assigned {
    note right
        is_work = True
        has_assignment = True
        _criminal != None
        Ready to arrest
    end note
}

state "Arrest Attempt" as Arresting {
    note right
        Executing arrest()
        Success based on:
        - fatigue level
        - crime severity
    end note
}

' Transitions
OffDuty --> OnDuty : hire()\nis_work = True

OnDuty --> OffDuty : fire()\nis_work = False

OnDuty --> Assigned : assign_crime()\n_criminal = (crime, severity)

Assigned --> Arresting : arrest()

Arresting --> OnDuty : success\n_criminal = None\nfatigue++

Arresting --> Assigned : failure\nfatigue++

Assigned --> OnDuty : recovery()\n_criminal = None\nfatigue = 0

note bottom of OnDuty
    Fatigue levels (visual only):
    - 0-2: Fresh (ðŸŸ¢)
    - 3-5: Tired (ðŸŸ¡)
    - 6+: Exhausted (ðŸ”´)
end note

note right of Arresting
    Success chance:
    1 - (fatigue + severity) / 20
    Clamped to [0.1, 0.9]
end note

' Termination
OnDuty --> [*] : fire()
OffDuty --> [*] : remove from system

@enduml
